<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>New Asgard ‚Äî Painel de Guerra com Simulador</title>
<style>
:root{
  --bg:#0b1220; --accent:#0b63d1; --accent-2:#ffd166;
  --muted:#a7b0c2; --text:#fff; --glass:rgba(255,255,255,0.03);
}
*{box-sizing:border-box;margin:0;padding:0}
html,body{height:100%;scroll-behavior:smooth;}
body{
  font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Arial;
  background:linear-gradient(180deg,#071022 0%, #08132a 100%);
  color:var(--text);
}

/* ===== CABE√áALHO ===== */
.topbar{
  position:sticky;top:0;z-index:50;
  display:flex;align-items:center;justify-content:space-between;
  gap:16px;padding:14px 24px;
  background:rgba(11,18,32,0.85);
  backdrop-filter:blur(12px);
  border-bottom:1px solid rgba(255,255,255,0.06);
  box-shadow:0 0 25px rgba(11,99,209,0.15);
}
.brand{display:flex;align-items:center;gap:12px;cursor:pointer;}
.brand img{
  width:48px;height:48px;border-radius:10px;object-fit:cover;
  box-shadow:0 0 8px rgba(11,99,209,0.4);
  transition:all .25s;
}
.brand:hover img{box-shadow:0 0 14px rgba(11,99,209,0.7)}
.brand h1{font-size:20px;color:var(--accent);text-shadow:0 0 6px rgba(11,99,209,0.5);}
.navbar{display:flex;gap:12px;flex-wrap:wrap;}
.nav-item{
  padding:8px 14px;border-radius:8px;color:var(--text);font-weight:600;font-size:14px;
  background:rgba(255,255,255,0.04);border:1px solid rgba(255,255,255,0.05);
  cursor:pointer;transition:all .2s;
}
.nav-item:hover{
  background:var(--accent);color:#071022;box-shadow:0 0 12px rgba(11,99,209,0.4);
}
.searchbar{flex:1;max-width:400px;position:relative;}
.searchbar input{
  width:100%;padding:10px 36px 10px 14px;border-radius:12px;
  border:1px solid rgba(255,255,255,0.1);
  background:rgba(255,255,255,0.03);color:var(--text);
}
.searchbar input:focus{
  outline:none;
  border-color:var(--accent);
  box-shadow:0 0 10px rgba(11,99,209,0.4);
}

/* ===== SE√á√ïES ===== */
section{padding:20px 18px;scroll-margin-top:100px;}
#inicio h2{text-align:center;color:var(--accent-2);margin-bottom:12px;font-size:28px;}
#inicio p{text-align:center;color:var(--muted);margin-bottom:20px;}

/* ===== TIMES ===== */
.layout{display:grid;grid-template-columns:320px 1fr;gap:18px;}
.column{
  background:linear-gradient(180deg, rgba(255,255,255,0.02), transparent);
  padding:14px;border-radius:12px;border:1px solid rgba(255,255,255,0.03);
  min-height:60vh;max-height:calc(100vh - 160px);overflow:auto;
}
.teams{
  background:rgba(255,255,255,0.04);
  backdrop-filter:blur(12px);
  box-shadow:0 0 15px rgba(11,99,209,0.15);
  border:1px solid rgba(255,255,255,0.08);
  transition:all .3s;
}
.teams:hover{box-shadow:0 0 25px rgba(11,99,209,0.3);}
.teams h2{
  margin-bottom:10px;color:var(--accent-2);text-transform:uppercase;
  letter-spacing:.08em;text-shadow:0 0 6px rgba(255,209,102,0.2);
}
.teams-list{list-style:none;display:flex;flex-direction:column;gap:10px;margin-top:10px;}
.team-card{
  position:relative;
  background:rgba(255,255,255,0.03);
  border:1px solid rgba(255,255,255,0.05);
  border-radius:12px;
  padding:10px 12px;
  cursor:pointer;
  display:flex;align-items:center;gap:10px;
  transition:all .25s;
  overflow:hidden;
}
.team-card::before{
  content:"";
  position:absolute;top:0;left:0;width:0%;height:100%;
  background:linear-gradient(90deg,rgba(11,99,209,0.2),rgba(255,209,102,0.1));
  transition:width .35s;
  z-index:0;
}
.team-card:hover::before{width:100%;}
.team-card:hover{
  transform:translateY(-3px) scale(1.02);
  box-shadow:0 0 12px rgba(11,99,209,0.3);
}
.team-card.active{
  border-color:var(--accent);
  box-shadow:0 0 15px rgba(11,99,209,0.5);
}
.team-card img{
  width:44px;height:44px;border-radius:8px;object-fit:cover;
  box-shadow:0 0 6px rgba(11,99,209,0.25);
  z-index:1;
}
.team-info{z-index:1;}
.team-info strong{display:block;font-size:15px;color:var(--accent-2);}
.team-info small{color:var(--muted);font-size:12px;}
.team-power{
  margin-left:auto;background:rgba(11,99,209,0.15);
  color:var(--accent-2);padding:4px 8px;border-radius:6px;
  font-size:12px;font-weight:700;z-index:1;
}

/* ===== CONTE√öDO CENTRAL ===== */
.options{display:flex;flex-wrap:wrap;gap:8px;margin-top:10px}
.options-btn{
  padding:8px 12px;border-radius:10px;
  border:1px solid rgba(255,255,255,0.04);
  background:rgba(255,255,255,0.02);
  cursor:pointer;transition:all .14s;
}
.options-btn.active{background:var(--accent);color:#071022;box-shadow:0 8px 20px rgba(11,99,209,0.12)}
.card{
  background:linear-gradient(180deg, rgba(255,255,255,0.01), rgba(255,255,255,0.00));
  padding:12px;border-radius:10px;border:1px solid rgba(255,255,255,0.03)
}

/* ===== VIS√ÉO GERAL MELHORADA ===== */
.team-stats{
  display:flex;gap:15px;margin-top:15px;flex-wrap:wrap;
}
.stat-card{
  flex:1;min-width:150px;
  padding:12px;border-radius:10px;
  border:1px solid rgba(255,255,255,0.06);
  background:rgba(255,255,255,0.02);
  box-shadow:0 4px 10px rgba(0,0,0,0.2);
}
.stat-card strong{
  display:block;color:var(--muted);font-size:13px;margin-bottom:4px;
  text-transform:uppercase;letter-spacing:.05em;
}
.stat-value{
  font-size:18px;font-weight:700;
}
.power-rating{
  color:var(--power-color);
  text-shadow:0 0 8px var(--power-color);
}
.strategy-text{
  color:var(--text);font-size:14px;line-height:1.4;
}
.members-grid{
  display:flex;flex-wrap:wrap;gap:8px;margin-top:10px;
}
.member-chip{
  padding:6px 10px;border-radius:6px;
  background:rgba(11,99,209,0.1); /* Cor de fundo suave do accent */
  border:1px solid rgba(11,99,209,0.25);
  color:var(--accent-2);
  font-size:13px;font-weight:600;
  transition:all .2s;
}
.member-chip:hover{
  background:rgba(11,99,209,0.3);
  transform:translateY(-2px);
  box-shadow:0 4px 8px rgba(11,99,209,0.2);
}

/* ===== SIMULADOR (NOVO ESTILO) ===== */
#simulatorContainer{
  padding:20px;
}
.sim-controls, .sim-result{
  margin-top:15px;
  padding:15px;
  border-radius:8px;
  border:1px solid rgba(255,255,255,0.05);
}
.sim-controls{
  background:rgba(11,99,209,0.05);
}
.sim-controls select{
  width:100%;
  padding:8px;
  border-radius:6px;
  background:rgba(255,255,255,0.05);
  color:var(--text);
  border:1px solid var(--accent);
  margin-bottom:10px;
  font-family:inherit;
  appearance: none; /* Remove seta padr√£o */
}
.sim-controls button{
  width:100%;
  padding:10px;
  border:none;
  border-radius:8px;
  background:var(--accent-2);
  color:#071022;
  font-weight:700;
  cursor:pointer;
  transition:all .2s;
}
.sim-controls button:hover{
  background:var(--accent);
  color:var(--text);
}
.sim-result h4{
  color:var(--accent-2);
  margin-bottom:8px;
}
#winChance{
  font-size:36px;
  font-weight:900;
  text-align:center;
  margin:15px 0;
  text-shadow:0 0 15px rgba(255,209,102,0.4);
}
#matchupHint{
  color:var(--muted);
  font-size:14px;
}
/* ==================================== */

/* ===== NOTAS ===== */
textarea.note-box{
  width:100%;min-height:140px;background:rgba(255,255,255,0.04);
  border:1px solid rgba(255,255,255,0.08);border-radius:10px;
  color:var(--text);padding:10px;resize:vertical;font-family:inherit;
}
.note-save{
  margin-top:8px;padding:8px 14px;border:none;border-radius:8px;
  background:var(--accent);color:#071022;cursor:pointer;font-weight:600;
  transition:all .15s;
}
.note-save:hover{opacity:.9}

footer{padding:12px 18px;text-align:center;color:var(--muted);background:rgba(0,0,0,0.3);}
@media(max-width:900px){.layout{grid-template-columns:1fr}.topbar{flex-direction:column;align-items:flex-start;gap:10px}}
</style>
</head>
<body>

<audio id="asgardSound" src="https://freesound.org/data/previews/341/341695_6243544-lq.mp3"></audio>

<header class="topbar">
  <div class="brand" onclick="scrollToSection('inicio')">
    <img src="https://upload.wikimedia.org/wikipedia/pt/thumb/7/7d/Thor_Ragnarok_poster.jpg/250px-Thor_Ragnarok_poster.jpg" alt="logo">
    <h1>New Asgard Brazil</h1>
  </div>

  <nav class="navbar">
    <div class="nav-item" data-target="inicio">In√≠cio</div>
    <div class="nav-item" data-target="times">Times</div>
    <div class="nav-item" data-target="simulador">Simulador</div>
    <div class="nav-item" data-target="contato">Contato</div>
  </nav>

  <div class="searchbar">
    <input id="search" placeholder="üîç Buscar time ou membro..." />
  </div>
</header>

<section id="inicio">
  <h2>Bem-vindo ao New Asgard Brazil</h2>
  <p>Escolha um time de defesa, veja estat√≠sticas e simule batalhas √©picas!</p>
</section>

<section id="times">
  <div class="layout">
    <aside class="column teams">
      <h2>Times ‚Äî Defesa</h2>
      <div class="hint">Clique em um time para ver integrantes, ataques e notas.</div>
      <ul id="teamsList" class="teams-list"></ul>
    </aside>

    <section class="column content">
      <h2 id="teamTitle">Selecione um time de defesa</h2>
      <p id="teamShort" class="hint">Detalhes aparecer√£o aqui.</p>
      <div id="optionsArea" class="options"></div>
      <div id="contentInner" class="card" style="margin-top:10px;">
        <p class="hint">Selecione um time da coluna da esquerda para come√ßar.</p>
      </div>
    </section>
  </div>
</section>

<section id="simulador">
  <h2>Simulador de Batalhas</h2>
  <p class="hint">Selecione um time de defesa na se√ß√£o acima e adicione um time atacante para estimar a chance de vit√≥ria.</p>

  <div id="simulatorContainer" class="card" style="margin-top:20px;">
    <p id="simStatus">‚ö†Ô∏è Selecione um **Time de Defesa** para come√ßar.</p>
  </div>
</section>

<section id="contato">
  <h2>Contato</h2>
  <p>Desenvolvido por Maycon Junior ‚Äî 61 982801931</p>
</section>

<footer>
  ¬© 2025 New Asgard Brazil
</footer>

<script>
const $ = s=>document.querySelector(s);
const $$ = s=>document.querySelectorAll(s);
const teamsListEl = $('#teamsList'), searchEl = $('#search');
const teamTitleEl = $('#teamTitle'), teamShortEl = $('#teamShort');
const optionsArea = $('#optionsArea'), contentInner = $('#contentInner');
const asgardSound = $('#asgardSound');
const simulatorContainer = $('#simulatorContainer');

let currentDefenseTeam = null; // Armazena o time de defesa selecionado

function scrollToSection(id){
  const section = document.getElementById(id);
  if(section){
    window.scrollTo({ top: section.offsetTop - 80, behavior: 'smooth' });
  }
}

// Tornar os bot√µes do cabe√ßalho funcionais
document.querySelectorAll('.nav-item').forEach(item=>{
  item.addEventListener('click', ()=>{
    const target = item.getAttribute('data-target');
    scrollToSection(target);
  });
});

const teamsData = [
  // OBS: Adicionei a propriedade 'powerScore' para ser usada no simulador
  { id:"vigilantes", name:"Vigilantes", description:"For√ßa de resposta urbana, t√°tica e furtiva.", image:"https://upload.wikimedia.org/wikipedia/pt/thumb/6/6b/Punisher_Netflix.jpg/250px-Punisher_Netflix.jpg", members:["Sabre de Prata","Assas√≠mio","Demolidor Moderno","Justiceiro","Elektra"], powerScore: 78, attackers:[{name:"Iluminati", pct:0},{name:"Fora do Tempo", pct:0},{name:"Liberdade", pct:0},{name:"Aniquiladores e Knul", pct:0}]},
  { id:"clube_inferno", name:"Clube do Inferno", description:"Conclave esot√©rico e caos controlado.", image:"https://upload.wikimedia.org/wikipedia/pt/thumb/c/c1/Emma_Frost_%28Modern%29.webp.png/250px-Emma_Frost_%28Modern%29.webp.png", members:["Emma Frost","Madelyne Pryor","Azazel","Sebastian Shaw","Rachel Summer"], powerScore: 92, attackers:[{name:"Submundo e Kestrel", pct:0},{name:"Iluminati", pct:0},{name:"Mercenarios Pagos", pct:0},{name:"Imortais e Gorr Treinador/Knul/Knul Ares/Quasar", pct:90}]},
  { id:"UCM", name:"UCM", description:"Unidos pelo destino, impar√°veis na batalha!", image:"https://upload.wikimedia.org/wikipedia/commons/thumb/c/cd/Fantastic_Four_logo_%28blue_and_white%29.svg/250px-Fantastic_Four_logo_%28blue_and_white%29.svg.png", members:["Tocha Humana","Mulher Invisivel","O coisa","Franklin Richards","Senhor Fantastico"], powerScore: 88, attackers:[{name:"Mercenarios Pagos e Scarlet Zumbi", pct:0},{name:"Mercenarios Pagos e Quasar", pct:0},{name:"Mercenarios Pagos Quasar e Ares", pct:0},{name:"Ares Mef Apo Kang Quasar", pct:0}]},
  { id:"Amaldicoados", name:"Amaldi√ßoados", description:"Da sombras surgimos... e nelas deixamos nossos inimigos!", image:"https://upload.wikimedia.org/wikipedia/pt/thumb/2/29/Bloodborne_capa.png/330px-Bloodborne_capa.png", members:["Juggernaut","Mordo","Capuz","Satana","hellverine"], powerScore: 95, attackers:[{name:"Submundo", pct:0},{name:"Submundo daken(nobu)", pct:0},{name:"For√ßa A", pct:0},{name:"Knowhere Quasar", pct:0},{name:"Mente coletiva e Knul", pct:0},{name:"Cabal com Apo e kang", pct:0},{name:"cabal com apo e mefisto", pct:0},{name:"mercenarios pagos", pct:0},{name:"fora do tempo", pct:0},{name:"orquidea", pct:0},{name:"imortais e ares", pct:0},{name:"for√ßa v", pct:0},{name:"poderosos vingadores", pct:0},{name:"fabulosos vingadores", pct:0},{name:"liberdade", pct:0},{name:"perseguidores noturno", pct:0},{name:"ucm", pct:0},{name:"clube do inferno", pct:0}]},
  { id:"Thunderbolts", name:"Thunderbolts", description:"Os thunderbolts entram em cena - caos, for√ßa e renden√ß√£o em cada golpe!", image:"https://upload.wikimedia.org/wikipedia/pt/thumb/a/a3/Thunderbolts_Vol_2_1.jpg/250px-Thunderbolts_Vol_2_1.jpg", members:["Hiperion","Treinador","Victoria Hand","Fantasma","Soprano"], powerScore: 82, attackers:[{name:"Iluminati e odin", pct:0},{name:"Mercenarios Pagos", pct:0},{name:"Imortais Ares", pct:0},{name:"For√ßa V", pct:0},{name:"Poderosos Vingadores", pct:0},{name:"Fabulosos Vingadores", pct:0},{name:"Liberdade", pct:0},{name:"Perseguidores Noturno", pct:0},{name:"UCM", pct:0},{name:"Clube do Inferno", pct:0},]},
  { id:"Liberdade", name:"Liberdade", description:"Lutamos por Justi√ßa, vencemos pela uni√£o.", image:"https://upload.wikimedia.org/wikipedia/commons/thumb/1/1a/Captain_America_Shield.svg/250px-Captain_America_Shield.svg.png", members:["Peggy Carter","Patriota","Falc√£o Joaquin","Capit√£o America Sam","Maquina de Combate"], powerScore: 75, attackers:[{name:"UCM", pct:0},]},
  { id:"Sociedade Aranha", name:"Sociedade Aranha", description:"Conectados pela teia, impar√°veis na batalha.", image:"https://upload.wikimedia.org/wikipedia/pt/5/52/Mulher-Aranha_%28Gwen_Stacy%29_em_Aranhaverso_2.png", members:["Peter B. Parker","Pavitr","Peni Parker","Aranha Fantasma","Noir"], powerScore: 80, attackers:[{name:"Arma-x23", pct:0},{name:"Gama Apo", pct:0},{name:"Mente coletiva skrul", pct:0},{name:"Mente coletiva e Knul", pct:0},{name:"Def sec APO", pct:0},{name:"Iluminati", pct:0},{name:"Sexteto de guerra", pct:0},{name:"Mercenarios Pagos", pct:0},{name:"Fora do tempo", pct:0},{name:"Aniquiladores e mefisto", pct:0},{name:"imortais e venom/wheave/doom/dormu/negativo", pct:0},{name:"Astral", pct:0},{name:"Thunderbolts", pct:0},{name:"Clube do inferno", pct:0}]},
  { id:"Iluminati", name:"Iluminati", description:"O poder do conhecimento molda o destino do universo.", image:"https://upload.wikimedia.org/wikipedia/pt/thumb/9/91/New_Avengers_Vol_3_31.jpg/250px-New_Avengers_Vol_3_31.jpg", members:["Hank Pym","Raio Negro","Pantera Shuri","Senhor Fantastico","Capit√£o Britania"], powerScore: 90, attackers:[{name:"Gama", pct:0},{name:"Iluminati Quasar", pct:0},{name:"Sexteto de guerra/macabro(mysterio)", pct:0},{name:"Mercenarios Pagos", pct:0},{name:"Fora do tempo", pct:0},{name:"Imortais wheave/dormu/quasar", pct:0},{name:"For√ßa V", pct:0}]},
  { id:"Aniquiladores", name:"Aniquiladores", description:"Onde chegamos nada sobrevive.", image:"https://upload.wikimedia.org/wikipedia/pt/thumb/0/03/Thanos_por_Jim_Starlin.png/330px-Thanos_por_Jim_Starlin.png", members:["Thanos Ultimato","Gorr","Gladiador","Ultimus","Surfista Prateado"], powerScore: 98, attackers:[{name:"Iluminati", pct:0},{name:"Eternos Apo Kestrel Nick", pct:0},{name:"Arma x Ares", pct:0},{name:"Mente coletiva Knul", pct:0},{name:"Def sec Apo/Odin", pct:0},{name:"Iluminati ou com Apo", pct:0},{name:"Sexteto de guerra", pct:0},{name:"Xtremo odin", pct:0},{name:"cabal e kang emma/Apo Quasar", pct:0},{name:"Mercenarios pagos", pct:0},{name:"Fora do tempo", pct:0},{name:"Imortais Ares/Dormu/Quasar", pct:0},{name:"For√ßa V", pct:0},{name:"Poderosos Vingadores", pct:0},{name:"Vigilantes", pct:0},{name:"Perseguidores noturno", pct:0},{name:"Thunderbolts", pct:0},{name:"UCM", pct:0},{name:"Clube do inferno Odin", pct:0}]},
  { id:"Mente Coletiva", name:"Mente Coletiva", description:"Uma s√≥ consci√™ncia, mil formas de vencer.", image:"https://upload.wikimedia.org/wikipedia/commons/thumb/7/7c/Venom_cosplay_madrid.jpg/250px-Venom_cosplay_madrid.jpg", members:["Duende Vermelho","Cavaleiro do Vazio","Carnificina","Gwenon","Venom"], powerScore: 85, attackers:[{name:"Submundo", pct:0},{name:"For√ßa A", pct:0},{name:"Arma-x23", pct:0},{name:"Gama", pct:0},{name:"Mente coletiva e Skrul", pct:0},{name:"knowhere", pct:0},{name:"Def sec Quik/wheave", pct:0},{name:"iluminati", pct:0},{name:"Novos Vingadores", pct:0},{name:"Sexteto de Guerra", pct:0},{name:"Fora do tempo", pct:0},{name:"Perseguidores noturno", pct:0}]},
  { id:"Bifrost", name:"Bifrost", description:"Abrindo portais, trazendo a f√∫ria dos Deuses!", image:"https://upload.wikimedia.org/wikipedia/commons/thumb/e/e6/Ring17.jpg/250px-Ring17.jpg", members:["Vahl","Loki","Bill Raio","Loki Teen","Sylvie"], attackers:[{name:"Submundo", pct:0},{name:"Eternos e doom dormu/wheave emma 2099", pct:0},{name:"Darkhold Quik", pct:0},{name:"For√ßa A", pct:0},{name:"Arma-x23 quik/doom", pct:0},{name:"Gama", pct:0},{name:"Semente da Morte", pct:0},{name:"Mente coletiva", pct:0},{name:"Def sec e quik/quasar", pct:0},{name:"Sexteto de guerra", pct:0},{name:"Cabal doom kang", pct:0},{name:"Imortais Dormu", pct:0},{name:"Amaldi√ßoados", pct:0}]},
  { id:"Tropa Nova", name:"Tropa Alfa", description:"Justi√ßa c√≥smica na velocidade da luz", image:"https://upload.wikimedia.org/wikipedia/pt/thumb/3/31/TrpAlfa.jpg/250px-TrpAlfa.jpg", members:["Estrela Polar","Sasquatch","Guardi√£o","Wolverine","Solaris"], attackers:[{name:"Iluminati", pct:0},{name:"Mercenarios Pagos ", pct:0},{name:"Fora do tempo com e sem cav/quasar", pct:0},{name:"Imortais Quasar", pct:0},{name:"UCM3", pct:0},{name:"Guerreiros Secreto", pct:0}]},
];

function renderTeams(list){
  teamsListEl.innerHTML='';
  list.forEach(t=>{
    const li=document.createElement('li');
    li.className='team-card';
    li.dataset.id=t.id;
    const power = t.powerScore || Math.floor(Math.random()*30+70);
    li.innerHTML=`<img src="${t.image}" alt="${t.name}"><div class="team-info"><strong>${t.name}</strong><small>${t.members.join(' ‚Ä¢ ')}</small></div><div class="team-power">‚ö°${power}%</div>`;
    li.onclick=()=>selectTeam(t.id);
    teamsListEl.appendChild(li);
  });
}

function selectTeam(id){
  asgardSound.currentTime=0; asgardSound.play();
  $$('.team-card').forEach(c=>c.classList.remove('active'));
  const card=document.querySelector(`[data-id="${id}"]`);
  if(card) card.classList.add('active');
  const team=teamsData.find(x=>x.id===id);
  if(!team) return;
  
  currentDefenseTeam = team; // Salva o time selecionado para o simulador
  teamTitleEl.textContent=team.name;
  teamShortEl.textContent=team.description;

  optionsArea.innerHTML='';
  const opts=['Vis√£o Geral','Ataques','Notas'];
  opts.forEach((o,i)=>{
    const b=document.createElement('button');
    b.className='options-btn'; b.textContent=o;
    if(i===0)b.classList.add('active');
    b.addEventListener('click',()=>{
      $$('.options-btn').forEach(x=>x.classList.remove('active'));
      b.classList.add('active');
      if(o==='Vis√£o Geral') showOverview(team);
      if(o==='Ataques') showAttackers(team);
      if(o==='Notas') showNotes(team);
    });
    optionsArea.appendChild(b);
  });

  showOverview(team);
  renderSimulator(); // Chama a fun√ß√£o para popular o simulador
}

function getColorForPower(power) {
    const p = parseInt(power);
    if (p >= 85) return '#2ecc71'; // Verde forte (Alta chance)
    if (p >= 75) return '#ffd166'; // Amarelo/Laranja (M√©dia chance)
    return '#f75555'; // Vermelho (Baixa chance)
}

function showOverview(team){
  const teamCard = document.querySelector(`[data-id="${team.id}"]`);
  let power = '??';
  if (teamCard) {
    const powerEl = teamCard.querySelector('.team-power');
    if (powerEl) {
      power = powerEl.textContent.replace('‚ö°', '').replace('%', '');
    }
  }

  contentInner.innerHTML=`
    <h3>${team.name} ‚Äî Vis√£o Geral</h3>
    <div class="team-stats">
      <div class="stat-card">
        <strong>For√ßa Estimada</strong>
        <span class="stat-value power-rating" style="--power-color:${getColorForPower(parseInt(power))};">‚ö°${power}%</span>
      </div>
      <div class="stat-card">
        <strong>Estrat√©gia</strong>
        <span class="stat-value strategy-text">${team.description}</span>
      </div>
    </div>
    
    <h4 style="margin-top: 20px; color: var(--accent-2);">Integrantes Principais:</h4>
    <div class="members-grid">
      ${team.members.map(m=>`
        <div class="member-chip">${m}</div>
      `).join('')}
    </div>
  `;
}

function showAttackers(team){
  const atk=team.attackers||[];
  const bars = atk.map(a=>{
    const color=a.pct>=66?'#2ecc71':(a.pct>=45?'#ffd166':'#f75555');
    return `<li class="attack-item"><div class="attacker-name">${a.name}</div><div class="percent" style="background:${color};color:#071022">${a.pct}%</div></li>`;
  }).join('');
  contentInner.innerHTML=`<h3>${team.name} ‚Äî Ataques</h3><ul class="attack-list">${bars}</ul>`;
}

function showNotes(team){
  const key='notes_'+team.id;
  const saved=localStorage.getItem(key)||'';
  contentInner.innerHTML=`<h3>${team.name} ‚Äî Notas</h3>
    <textarea id="noteBox" class="note-box" placeholder="Escreva observa√ß√µes...">${saved}</textarea>
    <button id="saveNote" class="note-save">üíæ Salvar Notas</button>`;
  $('#saveNote').onclick=()=>{
    localStorage.setItem(key,$('#noteBox').value);
    alert('Notas salvas!');
  }
}

// =======================================================
// SIMULADOR DE BATALHAS (L√ìGICA MSF)
// =======================================================

const attackerTeams = teamsData.map(t => ({ id: t.id, name: t.name, powerScore: t.powerScore || 80 }));

const warRooms = [
  { name: "Sem B√¥nus", modifier: 1.0 },
  { name: "Hangar (+Deflect)", modifier: 1.05 },
  { name: "Carga (+Vida/Dano Defensor)", modifier: 1.15 },
  { name: "Ponte (+Contra-Ataque)", modifier: 1.1 },
  { name: "Enfermaria (+Cura Defensor)", modifier: 1.1 },
  { name: "Arsenal (+Dano/Vida Atacante - BOOSTER)", modifier: 0.9 }
];

function renderSimulator() {
  if (!currentDefenseTeam) {
    simulatorContainer.innerHTML = '<p id="simStatus">‚ö†Ô∏è Selecione um **Time de Defesa** para come√ßar.</p>';
    return;
  }

  const defensePower = currentDefenseTeam.powerScore || 80;
  // Filtra o time de defesa atual para n√£o ser selecionado como atacante
  const availableAttackers = attackerTeams.filter(t => t.id !== currentDefenseTeam.id);
  
  const teamOptions = availableAttackers.map(t => 
    `<option value="${t.id}" data-power="${t.powerScore || 80}">${t.name} (Poder: ${t.powerScore || 80}%)</option>`
  ).join('');

  const roomOptions = warRooms.map((r, index) => 
    `<option value="${index}">${r.name}</option>`
  ).join('');

  simulatorContainer.innerHTML = `
    <h3>Simula√ß√£o vs ${currentDefenseTeam.name}</h3>
    <div class="sim-controls">
      <strong>Time Atacante:</strong>
      <select id="attackerSelect">
        ${teamOptions}
      </select>

      <strong>B√¥nus da Sala (War):</strong>
      <select id="roomSelect">
        ${roomOptions}
      </select>

      <button id="runSimBtn">üí• Rodar Simula√ß√£o</button>
    </div>

    <div id="simResultArea" class="sim-result" style="display:none;">
      <h4>Resultado da Batalha</h4>
      <div id="winChance">...</div>
      <p id="matchupHint"></p>
    </div>
  `;

  $('#runSimBtn').onclick = runSimulation;
}

function runSimulation() {
  const attackerSelect = $('#attackerSelect');
  const roomSelect = $('#roomSelect');
  const resultArea = $('#simResultArea');
  const winChanceEl = $('#winChance');
  const hintEl = $('#matchupHint');
  
  if (!currentDefenseTeam) return;

  const selectedAttackerId = attackerSelect.value;
  const selectedRoomIndex = parseInt(roomSelect.value);
  
  const attacker = attackerTeams.find(t => t.id === selectedAttackerId);
  const room = warRooms[selectedRoomIndex];

  // 1. Obt√©m o Poder Base dos Times (o valor de powerScore que definimos)
  const attackerPower = attacker.powerScore;
  const defensePower = currentDefenseTeam.powerScore;

  // 2. Aplica o Modificador de Sala (War Room) ao Defensor
  const modifiedDefensePower = defensePower * room.modifier;

  // 3. Calcula a Raz√£o de Poder (Power Ratio)
  const powerRatio = attackerPower / modifiedDefensePower;
  
  // 4. F√≥rmula Base de Chance de Vit√≥ria
  // Base de 60% se o poder for igual (1.0 * 50 + 10) - Simula a vantagem natural do Atacante no MSF
  let winChance = (powerRatio * 50) + 10;
  let hintText = `Resultado base calculado pela Raz√£o de Poder (${(powerRatio * 100).toFixed(0)}%) e B√¥nus de Sala.`;

  // 5. Sinergia e Hard Counters (Ajuste MSF)
  if (attacker.id === "Iluminati" && currentDefenseTeam.id === "Thunderbolts") {
      winChance += 25; 
      hintText = `B√¥nus de Sinergia: ${attacker.name} √© um forte "hard counter" contra ${currentDefenseTeam.name}.`;
  } else if (attacker.id === "Thunderbolts" && currentDefenseTeam.id === "Clube do Inferno") {
      winChance += 20; 
      hintText = `B√¥nus de Sinergia: Time com alta capacidade de controle (CC) √© eficaz contra times de controle como ${currentDefenseTeam.name}.`;
  } else if (attacker.id === "Amaldicoados" && currentDefenseTeam.id === "Mente Coletiva") {
      winChance += 10; 
      hintText = `B√¥nus de Sinergia: A alta gera√ß√£o de b√¥nus do ${attacker.name} ajuda a lidar com a resist√™ncia de ${currentDefenseTeam.name}.`;
  } else if (powerRatio < 0.8) {
      // Se o atacante for muito mais fraco
      winChance -= 10;
      hintText = `Penalidade: O poder do atacante √© significativamente menor que o defensor, mesmo com a vantagem da War.`;
  }

  // 6. Limites (Min 5%, Max 95%)
  winChance = Math.max(5, Math.min(95, Math.round(winChance)));

  // 7. Atualiza o Resultado
  resultArea.style.display = 'block';
  winChanceEl.textContent = `${winChance}%`;
  hintEl.textContent = hintText;
  
  // Define a cor de acordo com a chance
  const color = getColorForPower(winChance);
  winChanceEl.style.color = color;
  winChanceEl.style.textShadow = `0 0 15px ${color}44`; 
}


searchEl.addEventListener('input',e=>{
  const v=e.target.value.trim().toLowerCase();
  const filtered=teamsData.filter(t=>t.name.toLowerCase().includes(v)||t.members.join(' ').toLowerCase().includes(v));
  renderTeams(filtered.length?filtered:teamsData);
});

renderTeams(teamsData);
selectTeam(teamsData[0].id); // Seleciona o primeiro time ao carregar
</script>
</body>
</html>
